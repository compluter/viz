(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{165:function(t,e,n){var content=n(167);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("2c709312",content,!0,{sourceMap:!1})},166:function(t,e,n){"use strict";var r=n(165);n.n(r).a},167:function(t,e,n){(e=n(35)(!1)).push([t.i,".e-nuxt-container{font-family:Helvetica,sans-serif}.video-container{display:flex}.video-container video{width:100vw;height:100vh}.e-nuxt-system-info{padding:20px;border-top:1px solid #397c6d;border-bottom:1px solid #397c6d}",""]),t.exports=e},168:function(t,e,n){"use strict";n.r(e);n(34),n(33);var r=n(5),o=n(160),c=n.n(o),d=n(161),l=n(162),f=n.n(l),v=n(163),h=n.n(v),m=n(164),w=n.n(m),I=d.remote.systemPreferences.isTrustedAccessibilityClient(!0);console.log("Does the client have accessibility permissions?",I);var k={components:{},data:function(){return{trackInfo:{},videoId:"",videoDuration:"",videoUrl:""}},watch:{"trackInfo.databaseID":{handler:function(t,e){t!==e&&this.getVideoId(this.trackInfo)}},videoId:{handler:function(t,e){t!==e&&this.getVideoUrl(t)}}},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval(t.getTrackInfo,200);case 1:case"end":return e.stop()}}),e)})))()},methods:{openURL:function(t){d.remote.shell.openExternal(t)},getTrackInfo:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("\n        const Music = Application('Music')\n\n        try {\n          Music.currentTrack.name()\n        } catch(e) {\n          return ''\n        }\n\n        const artist = Music.currentTrack.artist()\n        const name = Music.currentTrack.name()\n        const duration = Music.currentTrack.duration()\n        const databaseID = Music.currentTrack.databaseID()\n\n        return { artist, name, duration, databaseID }\n      ",[]);case 2:t.trackInfo=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getVideoId:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("get video id for: ".concat(t.artist," ").concat(t.name)),n.next=3,f.a.get("https://www.googleapis.com/youtube/v3/search",{params:{part:"snippet",key:"AIzaSyDuOT1NZCxI5npBDyI_o9SBrWbySaWUFxA",q:"".concat(t.artist," ").concat(t.name," video")}});case 3:if(r=n.sent,(o=r.data.items).length){n.next=8;break}return e.videoUrl=null,n.abrupt("return");case 8:c=o[0].id.videoId,e.videoId=c;case 10:case"end":return n.stop()}}),n)})))()},getVideoUrl:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var video;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("play video for: ".concat(t)),(video=w()("http://www.youtube.com/watch?v=".concat(t),["--format=best"],{cwd:__dirname})).on("info",(function(t){var n=t.duration,r=t.url;e.videoDuration=n,e.videoUrl=r})),video.pipe(c.a.createWriteStream("viz.mp4"));case 4:case"end":return n.stop()}}),n)})))()}}},x=(n(166),n(22)),component=Object(x.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"e-nuxt-container"},[e("div",{staticClass:"video-container"},[e("video",{attrs:{src:this.videoUrl,autoplay:"",controls:""}})]),this._v(" "),e("h1",[this._v("\n    "+this._s(this.trackInfo.artist)+" - "+this._s(this.trackInfo.name)+"\n  ")])])}),[],!1,null,null,null);e.default=component.exports}}]);